# 存储引擎

存储引擎就是存储数据、建立索引、更新/查询数据等技术的实现方式。**存储引擎是基于表的**，而不是基于库的，所以存储引擎也可被称为表类型。同一数据库下的不同表可以有不同的存储引擎。

```mysql
# 显式可选引擎
show engines;

# 在创建表时指定引擎
create table xxx(...) engine=innodb;
```

| 特点         | InnoDB           | MyISAM | Memory |
| ------------ | ---------------- | ------ | ------ |
| 事务安全     | 支持             | -      | -      |
| 锁机制       | 行锁             | 表锁   | 表锁   |
| B+ tree 索引 | 支持             | 支持   | 支持   |
| Hash 索引    | -                | -      | 支持   |
| 全文索引     | 支持（5.6版本后) | 支持   | -      |
| 空间使用     | 高               | 低     | -      |
| 内存使用     | 高               | 低     | 中     |
| 批量插入速度 | 慢               | 快     | 快     |
| 支持外键     | 支持             | -      | -      |

# MyISAM

MyISAM是MySQL早期的默认存储引擎。

## 特点

- 不支持事务。
- 不支持外键。
- 支持表锁，不支持行锁。
- 访问速度快。
- 文件：
  - xxx.sdi：存储表结构信息。
  - xxx.MYD：存储数据。
  - xx.MYI：存储索引。

# Memory

Memory引擎的表数据时存储在内存中的，由于受到硬件问题、或断电问题的影响，只能将这些表作为临时表或缓存使用。

## 特点

- 数据存放在内存中。
- hash索引（默认）。
- 文件：xxx.sdi，存储表结构信息。

# InnoDB

InnoDB 是一种兼顾高可靠性和高性能的通用存储引擎，在 MySQL 5.5 之后，InnoDB 是默认的 MySQL 存储引擎。

## 特点

- DML操作遵循ACID模型，支持**事务**；
- **行级锁**，提高并发访问性能；
- 支持**外键**约束，保证数据的完整性和正确性；
- 文件：xxx.ibd。每张表对应一个表空间文件，存储该表的结构、数据、索引。

