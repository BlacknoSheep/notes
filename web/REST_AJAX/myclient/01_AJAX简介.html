<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>首页</title>
  </head>
  <body>
    <h1>这是客户端</h1>

    <!--
        把服务器中的数据在网页中显示出来
    -->
    <button id="btn_load">点击加载数据</button>

    <script>
      /*
        AJAX（Asynchronous Javascript And XML）
            - AJAX 是一种在无需重新加载整个网页的情况下，能够更新部分网页的技术。
            - 通过 js 向服务器发送请求来加载数据
            - XML 是早期 AJAX 使用的数据格式，现在用 JSON
        
        三种方案：
            1. XMLHttpRequest   早期方法，现在一般不用
            2. Axios    对 XMLHttpRequest 的封装，一般用这个
            3. Fetch    新方法，兼容性不好

        CORS（Cross-Origin Resource Sharing，跨源资源共享）
            - 跨域请求
                - 跨域需要检查三个东西：
                    协议，域名，端口号
                    只要有一个不同就算跨域
            - 当通过AJAX发送跨域请求时，浏览器为了服务器的安全，会阻止JS读取到服务器的数据
            - 解决方案：
                - 在服务器中设置一个允许跨域的头
                    Access-Control-Allow-Origin
      */

      const btn_load = document.getElementById("btn_load");
      btn_load.addEventListener("click", () => {
        /* XHR方案 */
        // 创建一个新的 xhr 对象
        const xhr = new XMLHttpRequest();

        // 设置请求的信息
        xhr.open("GET", "http://localhost:3000/students");
        xhr.send();
      });
    </script>
  </body>
</html>
