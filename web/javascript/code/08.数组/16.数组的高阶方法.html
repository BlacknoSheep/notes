<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数组的高阶方法</title>
    <script>
        const arr1 = ["e","c","a","a","b"];
        /*
            sort()
                - 对数组进行排序（破坏性），并返回该数组
                - 默认将数组按照升序排序
                    默认按Unicode编码进行排序（数组中的值会被转换为字符串）
                - 参数：
                    可以传递一个回调函数作为参数，用来指定排序规则
                        (a, b) => a - b     升序排列
                        (a, b) => b - a     降序排列
        */
        console.log("------默认按Unicode排------");
        console.log("arr1:", arr1);  // ['e', 'c', 'a', 'a', 'b']
        console.log("sort()的返回值：", arr1.sort());  // ['a', 'a', 'b', 'c', 'e']
        console.log("arr1:", arr1);  // ['a', 'a', 'b', 'c', 'e']

        const arr2 = [1,2,10,100,3];
        console.log("arr2:", arr2);  // [1, 2, 10, 100, 3]
        arr2.sort();
        console.log("arr2:", arr2);  // [1, 10, 100, 2, 3]

        console.log("------自定义排序规则------");
        arr2.sort((a, b) => a - b);
        console.log("arr2:", arr2);


        /*
            forEach()
                - 用来遍历数组
                - 它需要一个回调函数作为参数，会对数组中每个元素调用这个回调函数
                    - 回调函数有三个参数（可以只显示指定前几个）：
                        element 当前元素
                        index   当前元素的索引
                        array   被遍历的数组

        */
        const arr3 = ["I","II","III"];
        console.log("------forEach()------");
        console.log("回调函数的参数：")
        arr3.forEach((a,b,c,d) => {
            console.log(a,b,c,d);
        });

        arr3.forEach((ele, index) => {
            console.log("index:", index);
        })
        

        /*
            filter()
                - 将数组中符合条件的元素保存到一个新数组中返回（非破坏性）
                - 需要一个回调函数作为参数，会为每一个元素去调用回调函数，
                    并根据返回值来决定是否将元素添加到新数组中
                    - 回调函数的参数同 forEach()
        */
        console.log("------filter()------");
        const arr4 = [1,10,100,1000];
        let result4 = arr4.filter(ele => ele > 10);
        console.log(result4);  // [100, 1000]


        /*
            map()
                - 根据当前数组生成一个新数组（非破坏性）
                - 需要一个回调函数作为参数，回调函数的返回值被添加到数组中
                    - 回调函数的参数同 forEach()
        */
        console.log("------map()------");
        const arr5 = [0,1,2,3];
        let result5 = arr5.map(ele => ele*10);
        console.log(result5);  // [0, 10, 20, 30]

        const arr5_2 = ["第一行","第二行","第三行"];
        result5_2 = arr5_2.map(ele => {
            return "<div>"+ele+"</div>";
        });
        console.log(result5_2);  // ['<div>第一行</div>', '<div>第二行</div>', '<div>第三行</div>']
        for(let item of result5_2){
            document.write(item);
        }


        /*
            reduce()
                - 可以用来将一个数组中的所有元素整合为一个值
                - 需要一个回调函数作为参数
                    - 回调函数参数列表：
                        (a,b)   默认初始a为arr[0]，b为arr[1]，
                                每次将返回值赋给a，将数组中下一个值赋给b，
                                直至b遍历完最后一个元素
                - 还可以传入第二个参数作为a的初始值，此时b从arr[0]开始
        */
        const arr6 = [1,2,3,4];
        let result6 =arr6.reduce((a,b) => {
            console.log(a,b);
            return a + b;
        })
        console.log(result6);
        // 1 2
        // 3 3
        // 6 4
        // 10

        result6 = arr6.reduce((a,b) => a+b, 1000);
        console.log(result6);  // 1010
    </script>
</head>
<body>
    
</body>
</html>